<script>
	import { inview } from 'svelte-inview';
	import { fly, draw } from 'svelte/transition';

    let isInView = false;

    const handleInview = (e) => {
        isInView = e.detail.inView;
    }

    let dur = 300;
    const trans = (node, { order }) => {
        if (node.nodeName === 'g') {
            return fly(node, {
                x: order === 2 ? 100 : -100,
                delay: order * dur,
                duration: dur,
            });
        }
        return draw(node, {
            delay: order * dur,
            duration: dur,
        });
    }
</script>

<section use:inview={{ threshold: 1, unobserveOnEnter: true }} on:change={handleInview}>
    <svg viewBox="0 0 1280 438" fill="none" xmlns="http://www.w3.org/2000/svg">
        {#if isInView}
			<g in:trans={{ order: 0 }} transform-origin="199.5 82.5">
				<path
					d="M70.848 78.736C77.184 79.504 82.272 81.952 86.112 86.08C89.952 90.208 91.872 95.584 91.872 102.208C91.872 110.656 88.944 117.424 83.088 122.512C77.232 127.504 69.312 130 59.328 130H8.92798V29.2H58.176C68.064 29.2 75.888 31.552 81.648 36.256C87.408 40.96 90.288 47.296 90.288 55.264C90.288 61.6 88.512 66.832 84.96 70.96C81.504 75.088 76.8 77.68 70.848 78.736ZM48.384 48.496H38.88V69.808H48.384C52.032 69.808 54.912 68.848 57.024 66.928C59.232 65.008 60.336 62.368 60.336 59.008C60.336 55.744 59.28 53.2 57.168 51.376C55.056 49.456 52.128 48.496 48.384 48.496ZM49.104 109.12C52.944 109.12 55.92 108.112 58.032 106.096C60.24 104.08 61.344 101.392 61.344 98.032C61.344 94.768 60.24 92.176 58.032 90.256C55.824 88.24 52.896 87.232 49.248 87.232H38.88V109.12H49.104Z"
					fill="currentColor"
				/>
				<path
					d="M163.376 130L160.208 118.336H127.664L124.496 130H93.3919L127.808 29.2H160.208L194.48 130H163.376ZM133.424 96.592H154.448L143.936 57.424L133.424 96.592Z"
					fill="currentColor"
				/>
				<path
					d="M290.227 66.784C290.227 73.504 288.739 79.648 285.763 85.216C282.883 90.688 278.851 95.056 273.667 98.32L289.795 130H255.379L242.419 104.224H234.067V130H204.115V29.2H252.787C263.539 29.2 272.467 32.752 279.571 39.856C286.675 46.96 290.227 55.936 290.227 66.784ZM234.067 52.528V81.04H246.451C250.291 81.04 253.459 79.696 255.955 77.008C258.547 74.32 259.843 70.912 259.843 66.784C259.843 62.656 258.547 59.248 255.955 56.56C253.459 53.872 250.339 52.528 246.595 52.528H234.067Z"
					fill="currentColor"
				/>
				<path
					d="M366.579 130L363.411 118.336H330.867L327.699 130H296.595L331.011 29.2H363.411L397.683 130H366.579ZM336.627 96.592H357.651L347.139 57.424L336.627 96.592Z"
					fill="currentColor"
				/>
			</g>

            <path
				d="M407 82H976.5C1014.33 82 1045 112.668 1045 150.5V150.5C1045 188.332 1014.33 219 976.5 219H797"
				stroke="currentColor"
				class="text-green"
				stroke-width="20"
				in:trans={{ order: 1 }}
			/>

			<g in:trans={{ order: 2 }} transform-origin="639.5 219.5">
				<path
					d="M561.145 215.736C567.481 216.504 572.569 218.952 576.409 223.08C580.249 227.208 582.169 232.584 582.169 239.208C582.169 247.656 579.241 254.424 573.385 259.512C567.529 264.504 559.609 267 549.625 267H499.225V166.2H548.473C558.361 166.2 566.185 168.552 571.945 173.256C577.705 177.96 580.585 184.296 580.585 192.264C580.585 198.6 578.809 203.832 575.257 207.96C571.801 212.088 567.097 214.68 561.145 215.736ZM538.681 185.496H529.177V206.808H538.681C542.329 206.808 545.209 205.848 547.321 203.928C549.529 202.008 550.633 199.368 550.633 196.008C550.633 192.744 549.577 190.2 547.465 188.376C545.353 186.456 542.425 185.496 538.681 185.496ZM539.401 246.12C543.241 246.12 546.217 245.112 548.329 243.096C550.537 241.08 551.641 238.392 551.641 235.032C551.641 231.768 550.537 229.176 548.329 227.256C546.121 225.24 543.193 224.232 539.545 224.232H529.177V246.12H539.401Z"
					fill="currentColor"
				/>
				<path
					d="M680.54 203.784C680.54 210.504 679.052 216.648 676.076 222.216C673.196 227.688 669.164 232.056 663.98 235.32L680.108 267H645.692L632.732 241.224H624.38V267H594.428V166.2H643.1C653.852 166.2 662.78 169.752 669.884 176.856C676.988 183.96 680.54 192.936 680.54 203.784ZM624.38 189.528V218.04H636.764C640.604 218.04 643.772 216.696 646.268 214.008C648.86 211.32 650.156 207.912 650.156 203.784C650.156 199.656 648.86 196.248 646.268 193.56C643.772 190.872 640.652 189.528 636.908 189.528H624.38Z"
					fill="currentColor"
				/>
				<path
					d="M756.891 267L753.723 255.336H721.18L718.011 267H686.907L721.323 166.2H753.723L787.995 267H756.891ZM726.939 233.592H747.964L737.451 194.424L726.939 233.592Z"
					fill="currentColor"
				/>
			</g>

            <path
				d="M482 219L268 219C230.445 219 200 249.445 200 287V287C200 324.555 230.445 355 268 355L801 355"
				stroke="currentColor"
				class="text-green"
				stroke-width="20"
                in:trans={{ order: 3 }}
			/>

			<g in:trans={{ order: 4 }} transform-origin="1044.5 355.5">
				<path
					d="M879.848 351.736C886.184 352.504 891.272 354.952 895.112 359.08C898.952 363.208 900.872 368.584 900.872 375.208C900.872 383.656 897.944 390.424 892.088 395.512C886.232 400.504 878.312 403 868.328 403H817.928V302.2H867.176C877.064 302.2 884.888 304.552 890.648 309.256C896.408 313.96 899.288 320.296 899.288 328.264C899.288 334.6 897.512 339.832 893.96 343.96C890.504 348.088 885.8 350.68 879.848 351.736ZM857.384 321.496H847.88V342.808H857.384C861.032 342.808 863.912 341.848 866.024 339.928C868.232 338.008 869.336 335.368 869.336 332.008C869.336 328.744 868.28 326.2 866.168 324.376C864.056 322.456 861.128 321.496 857.384 321.496ZM858.104 382.12C861.944 382.12 864.92 381.112 867.032 379.096C869.24 377.08 870.344 374.392 870.344 371.032C870.344 367.768 869.24 365.176 867.032 363.256C864.824 361.24 861.896 360.232 858.248 360.232H847.88V382.12H858.104Z"
					fill="currentColor"
				/>
				<path
					d="M936.232 298.024C932.776 298.024 929.8 296.872 927.304 294.568C924.904 292.168 923.704 289.336 923.704 286.072C923.704 282.712 924.904 279.832 927.304 277.432C929.704 275.032 932.68 273.832 936.232 273.832C939.784 273.832 942.76 275.032 945.16 277.432C947.56 279.736 948.76 282.616 948.76 286.072C948.76 289.336 947.56 292.168 945.16 294.568C942.76 296.872 939.784 298.024 936.232 298.024ZM969.784 298.024C966.328 298.024 963.4 296.872 961 294.568C958.696 292.168 957.544 289.336 957.544 286.072C957.544 282.616 958.696 279.736 961 277.432C963.4 275.032 966.328 273.832 969.784 273.832C973.336 273.832 976.312 275.032 978.712 277.432C981.208 279.832 982.456 282.712 982.456 286.072C982.456 289.336 981.208 292.168 978.712 294.568C976.312 296.872 973.336 298.024 969.784 298.024ZM972.376 403L969.208 391.336H936.664L933.496 403H902.392L936.808 302.2H969.208L1003.48 403H972.376ZM942.424 369.592H963.448L952.936 330.424L942.424 369.592Z"
					fill="currentColor"
				/>
				<path
					d="M1099.23 339.784C1099.23 346.504 1097.74 352.648 1094.76 358.216C1091.88 363.688 1087.85 368.056 1082.67 371.32L1098.8 403H1064.38L1051.42 377.224H1043.07V403H1013.12V302.2H1061.79C1072.54 302.2 1081.47 305.752 1088.57 312.856C1095.68 319.96 1099.23 328.936 1099.23 339.784ZM1043.07 325.528V354.04H1055.45C1059.29 354.04 1062.46 352.696 1064.96 350.008C1067.55 347.32 1068.84 343.912 1068.84 339.784C1068.84 335.656 1067.55 332.248 1064.96 329.56C1062.46 326.872 1059.34 325.528 1055.6 325.528H1043.07Z"
					fill="currentColor"
				/>
				<path
					d="M1148.25 406.168C1135.1 406.168 1124.73 403 1117.15 396.664C1109.66 390.232 1105.92 381.352 1105.92 370.024H1135.87C1135.87 374.344 1136.97 377.752 1139.18 380.248C1141.48 382.744 1144.65 383.992 1148.68 383.992C1155.4 383.992 1158.76 381.208 1158.76 375.64C1158.76 373.336 1158.04 371.512 1156.6 370.168C1155.16 368.728 1152.72 367.336 1149.26 365.992L1129.24 358.648C1114.84 353.272 1107.64 343.768 1107.64 330.136C1107.64 320.728 1111.15 313.192 1118.16 307.528C1125.26 301.864 1134.91 299.032 1147.1 299.032C1159.39 299.032 1169.18 301.912 1176.48 307.672C1183.87 313.432 1187.56 321.304 1187.56 331.288H1157.61C1157.61 327.544 1156.65 324.664 1154.73 322.648C1152.91 320.536 1150.27 319.48 1146.81 319.48C1144.03 319.48 1141.82 320.152 1140.19 321.496C1138.56 322.84 1137.74 324.712 1137.74 327.112C1137.74 329.128 1138.56 330.904 1140.19 332.44C1141.82 333.88 1144.7 335.368 1148.83 336.904L1167.26 343.96C1181.56 349.528 1188.72 359.224 1188.72 373.048C1188.72 383.224 1185.07 391.288 1177.77 397.24C1170.48 403.192 1160.64 406.168 1148.25 406.168Z"
					fill="currentColor"
				/>
				<path
					d="M1265.8 368.44C1258.32 376.216 1248.24 380.104 1235.56 380.104C1222.89 380.104 1212.81 376.216 1205.32 368.44C1197.84 360.664 1194.09 350.968 1194.09 339.352C1194.09 327.736 1197.84 318.088 1205.32 310.408C1212.81 302.632 1222.89 298.744 1235.56 298.744C1248.24 298.744 1258.32 302.632 1265.8 310.408C1273.29 318.088 1277.04 327.736 1277.04 339.352C1277.04 350.968 1273.29 360.664 1265.8 368.44ZM1213.96 361.384C1219.34 366.952 1226.54 369.736 1235.56 369.736C1244.59 369.736 1251.74 366.952 1257.02 361.384C1262.4 355.72 1265.08 348.376 1265.08 339.352C1265.08 330.328 1262.4 323.032 1257.02 317.464C1251.74 311.896 1244.59 309.112 1235.56 309.112C1226.54 309.112 1219.34 311.896 1213.96 317.464C1208.68 323.032 1206.04 330.328 1206.04 339.352C1206.04 348.376 1208.68 355.72 1213.96 361.384ZM1221.45 356.632V320.488H1239.16C1243.1 320.488 1246.32 321.832 1248.81 324.52C1251.31 327.112 1252.56 330.28 1252.56 334.024C1252.56 339.496 1250.11 343.288 1245.21 345.4L1252.99 356.632L1240.89 356.488L1234.41 346.552H1232.11L1232.25 356.632H1221.45ZM1232.25 338.92H1237C1238.35 338.92 1239.4 338.44 1240.17 337.48C1241.04 336.52 1241.47 335.368 1241.47 334.024C1241.47 332.584 1241.04 331.384 1240.17 330.424C1239.4 329.464 1238.35 328.984 1237 328.984H1232.25V338.92Z"
					fill="currentColor"
				/>
			</g>
            {/if}
		</svg>
</section>

<style>
	section {
		@apply span-full bg-black;
		@apply py-16 px-4;
	}
	svg {
		@apply text-white max-w-7xl mx-auto overflow-visible;
	}
	path#track {
		@apply text-green;
	}
</style>
