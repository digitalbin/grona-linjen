import { useEffect, useState } from 'react';
import Head from 'next/head';
import { motion, useMotionValue, useTransform } from 'framer-motion';

export default function Home() {
    // const [pathLength, setPathLength] = useState(0);
    // useEffect(() => {
    //   if (process.browser) {
    //     const path = document.querySelector('path');
    //     const length = path.getTotalLength();
    //     setPathLength(length);
    //   }
    // }, []);
    const pathLength = useMotionValue(0);
    // const G = useTransform(pathLength, [0, 0.1], [0, 1]);

    // const R = useTransform(pathLength, [.8, .9], ["hidden", "shown"]);

    // const Ö = useTransform(pathLength, [0.36, 0.46 - 0.05], [0, 1]);
    // const N = useTransform(pathLength, [0.65, 0.75 - 0.05], [0, 1]);
    // const A = useTransform(pathLength, [0.85, 0.95 - 0.05], [0, 1]);

    const [seq, setSeq] = useState({
      G: false,
      R: false,
      Ö: false,
      N: false,
      A: false,
    });

    const updater = val => {
      if (val > 0.00 && !seq.G) setSeq(p => ({ ...p, G: true }));
      if (val > 0.11 && !seq.R) setSeq(p => ({ ...p, R: true }));
      if (val > 0.36 && !seq.Ö) setSeq(p => ({ ...p, Ö: true }));
      if (val > 0.65 && !seq.N) setSeq(p => ({ ...p, N: true }));
      if (val > 0.85 && !seq.A) setSeq(p => ({ ...p, A: true }));
    }

    useEffect(() => {
      return pathLength.onChange(updater);
    }, [pathLength])

    const shake = {
      // rotate: [-5, -10, 0],
      // x: [-3, 3],
      // y: [-3, 3],
    }

    return (
        <div
            style={{
                display: 'flex',
                justifyContent: 'center',
                padding: '4rem',
                height: '100%',
                backgroundColor: '#0A0F16',
            }}
        >
            <svg
                width="1187"
                height="1072"
                viewBox="0 0 1187 1072"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                className="bigboi"
            >
              {/* LINJE */}
                <motion.path
                    d="M243 122H621C659.66 122 691 153.34 691 192V221V250.5C691 289.16 659.66 320.5 621 320.5H137C98.3401 320.5 67 351.84 67 390.5V419V448.5C67 487.16 98.3401 518.5 137 518.5H1103C1141.66 518.5 1173 549.84 1173 588.5V619.5C1173 658.16 1141.66 689.5 1103 689.5H562.5C523.84 689.5 492.5 720.84 492.5 759.5V761C492.5 799.66 461.16 831 422.5 831H194C155.34 831 124 862.34 124 901V988C124 1026.66 155.34 1058 194 1058H449.5"
                    stroke="#00F148"
                    strokeWidth="28"
                    className="green_line"
                    style={{
                      pathLength,
                    }}
                    variants={{
                      start: {
                        pathLength: 0,
                      },
                      end: {
                        pathLength: 1,
                      }
                    }}
                    initial="start"
                    animate="end"
                    transition={{
                        duration: 10,
                    }}
                />

                {/* G -- 0 */}

                <rect width="241" height="222" fill="#0A0F16" />
                <motion.path
                    d="M93.25 30.305C96 29.869 98.925 29.417 99.75 29.301C100.575 29.1855 105.975 29.1545 111.75 29.2325C120.165 29.3455 123.339 29.5925 127.735 30.476C130.752 31.0825 135.547 32.357 138.391 33.3085C141.236 34.2605 145.431 35.9265 147.714 37.0115C149.998 38.0965 153.932 40.3405 156.458 41.999C158.983 43.657 163.085 46.9765 165.573 49.375C168.061 51.774 171.2 55.202 172.548 56.9935C173.896 58.7845 175.906 61.9845 177.014 64.105C178.123 66.225 179.585 69.4365 180.265 71.241L182 76.5L183.5 84.5H144.5C144.5 84.5 142.607 77.976 140.926 75.648C139.246 73.32 136.381 70.1805 134.561 68.6715C132.74 67.162 129.45 65.053 127.25 63.9845C125.05 62.916 121.787 61.6965 120 61.275C118.213 60.854 114.613 60.365 112 60.189C109.201 60.001 105.402 60.114 102.75 60.465C100.275 60.7925 96.225 61.735 93.75 62.56C91.275 63.3845 87.5625 65.1095 85.5 66.393C83.4375 67.6765 80.1455 70.307 78.1845 72.2385C76.224 74.1695 73.252 77.866 71.5815 80.452C69.9105 83.0385 67.754 87.126 66.7895 89.536C65.825 91.946 64.538 96.2425 63.929 99.084C63.013 103.361 62.8225 105.843 62.8225 113.5C62.8225 121.168 63.0125 123.638 63.9335 127.937C64.5445 130.79 65.8145 135.035 66.756 137.369C67.6975 139.704 69.5365 143.333 70.8425 145.432C72.149 147.532 75.025 151.063 77.234 153.279C79.4425 155.494 82.58 158.174 84.206 159.234C85.8315 160.294 88.9815 161.929 91.206 162.867C93.43 163.806 97.05 165.014 99.25 165.552C101.45 166.09 105.95 166.662 109.25 166.823C112.748 166.993 116.905 166.879 119.219 166.549C121.403 166.238 125.062 165.339 127.35 164.55C129.639 163.761 132.795 162.358 134.363 161.433C135.931 160.507 139.04 157.95 141.271 155.75C143.502 153.55 146.191 150.311 147.245 148.553C148.525 146.415 149.939 143.617 150.094 142L151 136.5H122.5V108.5H201.5V136.5H190C189.452 139.094 188.662 141.632 187.641 144.078L186.464 146.9C186.464 146.9 183.898 153.825 182.721 156.361C181.544 158.897 179.362 162.843 177.872 165.129C176.381 167.416 173.781 170.89 172.095 172.85C170.409 174.809 167.391 177.751 165.389 179.386C163.387 181.021 159.958 183.528 157.768 184.957C155.577 186.387 152.138 188.339 150.123 189.295C148.108 190.251 144.391 191.726 141.861 192.573C139.332 193.421 134.785 194.675 131.757 195.361C126.842 196.474 124.791 196.635 112.684 196.856C101.492 197.06 98.174 196.956 93.716 196.256C90.744 195.79 86.161 194.783 83.5315 194.017C80.9015 193.251 76.993 191.918 74.8455 191.056C72.6975 190.193 69.7725 188.9 68.3455 188.182C66.918 187.464 63.95 185.708 61.75 184.279C59.55 182.85 56.0625 180.285 54 178.578C51.9375 176.872 48.604 173.625 46.5925 171.363C44.5805 169.101 41.4895 165.095 39.7235 162.462C37.957 159.828 35.4095 155.328 34.062 152.462C32.7145 149.595 30.8935 145 30.0155 142.25C29.1375 139.5 28 135.225 27.488 132.75C26.9755 130.275 26.3025 125.895 25.991 123.016C25.68 120.137 25.4345 115.412 25.445 112.516C25.4555 109.62 25.8095 104.631 26.232 101.43C26.654 98.2295 27.547 93.503 28.2165 90.928C28.8855 88.3525 30.0365 84.559 30.7735 82.4975C31.511 80.4365 33.4495 76.119 35.082 72.904C36.7145 69.6885 39.445 65.076 41.15 62.654C42.855 60.2315 46.8375 55.65 50 52.4725C54.0805 48.372 57.4245 45.5825 61.5165 42.864C64.6885 40.757 69.4545 38.0185 72.108 36.7785C74.7615 35.5385 79.479 33.753 82.5915 32.811C85.7035 31.8695 90.5 30.7415 93.25 30.305Z"
                    fill="white"
                    animate={shake}
                    transition={{
                      yoyo: Infinity,
                      duration: 0.2,
                    }}
                    opacity={seq.G ? 1 : 0}
                />

                {/* R -- 0.11 */}

                <rect x="621" y="193" width="186" height="219" fill="#0A0F16" />
                <motion.path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M650 222.18V383H686L686.5 338.718H704.5L733 383H776L744 332C744 332 749.949 328.49 752.7 326.295C755.203 324.299 758.688 321.123 760.446 319.238C762.204 317.354 764.647 314.258 765.875 312.36C767.103 310.461 768.967 307.073 770.018 304.829C771.069 302.586 772.399 299.063 772.975 297C773.55 294.938 774.353 291.225 774.758 288.75C775.164 286.275 775.496 282.338 775.496 280C775.496 277.663 775.164 273.725 774.758 271.25C774.353 268.775 773.55 265.063 772.975 263C772.399 260.938 771.045 257.363 769.964 255.056C768.884 252.749 766.711 248.924 765.135 246.556C763.56 244.188 760.692 240.659 758.761 238.715C756.83 236.77 753.763 234.129 751.945 232.846C750.127 231.562 746.865 229.628 744.695 228.546C742.525 227.465 739.323 226.103 737.579 225.519C735.835 224.936 732.235 223.968 729.579 223.369C724.906 222.315 723.664 222.276 691.25 222.18L650 222.18ZM724.25 254.669C722.6 253.799 719.9 252.704 718.25 252.237C715.961 251.588 687 252 687 252V308H717C718.65 307.635 721.418 306.617 723.456 305.648C726.131 304.375 728.087 302.947 730.486 300.514C732.756 298.213 734.379 295.972 735.603 293.447C736.59 291.414 737.684 288.513 738.034 287C738.384 285.488 738.663 282.221 738.654 279.74C738.644 277.001 738.298 274.056 737.774 272.24C737.299 270.596 736.087 267.675 735.082 265.75C734.019 263.715 731.998 260.995 730.252 259.25C728.601 257.6 725.9 255.538 724.25 254.669Z"
                    fill="white"
                    animate={shake}
                    transition={{
                      yoyo: Infinity,
                      duration: 0.2,
                    }}
                    opacity={seq.R ? 1 : 0}
                />

                {/* Ö -- 0.36 */}

                <rect x="246" y="396" width="189" height="214" fill="#0A0F16" />
                <motion.path
                  d="M290 447V420L394 420V447H290Z" fill="white"
                  animate={shake}
                  transition={{
                    yoyo: Infinity,
                    duration: 0.2,
                  }}
                />
                <motion.path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M332 456.743C329.938 457.134 326.225 458.035 323.75 458.744C321.275 459.453 316.512 461.37 313.164 463.004C309.526 464.779 305.065 467.49 302.072 469.745C299.318 471.819 295.685 475.032 293.999 476.883C292.312 478.735 289.49 482.401 287.728 485.031C285.965 487.66 283.645 491.712 282.571 494.035C281.498 496.359 280.042 500.086 279.337 502.318C278.632 504.55 277.662 508.373 277.182 510.813C276.612 513.712 276.304 517.677 276.294 522.25C276.283 527.199 276.546 530.495 277.192 533.5C277.695 535.838 278.663 539.55 279.344 541.75C280.025 543.95 281.83 548.312 283.357 551.442C284.914 554.634 287.725 559.246 289.759 561.942C291.754 564.587 294.705 568.005 296.318 569.538C297.93 571.071 301.151 573.733 303.474 575.454C305.798 577.175 310.185 579.794 313.224 581.273C316.263 582.753 320.775 584.546 323.25 585.258C325.725 585.97 330 586.899 332.75 587.324C336.324 587.875 339.747 588.018 344.75 587.827C348.6 587.679 353.438 587.191 355.5 586.741C357.562 586.291 360.938 585.362 363 584.675C365.062 583.989 368.637 582.544 370.944 581.464C373.251 580.384 377.039 578.235 379.362 576.69C381.685 575.144 385.872 571.592 388.668 568.796C391.463 565.999 395.175 561.629 396.918 559.083C398.66 556.537 400.952 552.607 402.01 550.35C403.068 548.092 404.523 544.221 405.243 541.748C405.963 539.274 406.876 535.113 407.272 532.5C407.669 529.888 407.994 525.163 407.994 522C407.994 518.838 407.669 514.094 407.272 511.458C406.875 508.823 405.866 504.533 405.03 501.925C404.195 499.317 402.393 494.986 401.026 492.3C399.658 489.614 397.256 485.634 395.687 483.456C394.119 481.277 390.566 477.295 387.793 474.605C385.019 471.916 380.973 468.532 378.801 467.086C376.629 465.64 373.029 463.582 370.801 462.512C368.573 461.442 365.323 460.093 363.579 459.513C361.835 458.933 358.235 457.991 355.579 457.418C352.27 456.705 348.39 456.324 343.25 456.205C338.174 456.088 334.537 456.262 332 456.743ZM356.75 495.65C355.1 494.79 352.4 493.634 350.75 493.083C349.1 492.531 346.175 491.958 344.25 491.809C342.164 491.648 339.244 491.821 337.021 492.239C334.794 492.658 331.571 493.792 329.022 495.056C325.721 496.691 323.902 498.034 321.001 500.972C318.825 503.178 316.542 506.106 315.564 507.946C314.637 509.691 313.571 512.273 313.195 513.684C312.82 515.096 312.381 517.938 312.22 520C312.034 522.383 312.194 525.209 312.658 527.75C313.059 529.95 313.945 532.988 314.625 534.5C315.305 536.013 316.905 538.657 318.181 540.376C319.456 542.095 321.906 544.538 323.625 545.804C325.344 547.071 327.799 548.639 329.081 549.29C330.363 549.94 333.058 550.928 335.07 551.486C337.169 552.068 340.227 552.497 342.24 552.493C344.17 552.489 347.17 552.151 348.906 551.741C350.642 551.332 353.454 550.307 355.156 549.463C356.858 548.619 359.458 546.996 360.935 545.857C362.411 544.719 364.641 542.541 365.889 541.019C367.138 539.496 368.885 536.675 369.773 534.75C370.661 532.825 371.638 530.058 371.944 528.601C372.25 527.143 372.5 524.198 372.5 522.056C372.5 519.811 372.081 516.521 371.511 514.293C370.967 512.166 369.903 509.261 369.147 507.838C368.391 506.415 365.968 503.442 363.762 501.232C361.326 498.792 358.571 496.599 356.75 495.65Z"
                    fill="white"
                    animate={shake}
                    transition={{
                      yoyo: Infinity,
                      duration: 0.2,
                    }}
                />

                {/* N -- 0.65 */}

                <rect x="819" y="573" width="195" height="214" fill="#0A0F16" />
                <motion.path
                    d="M849 759V598H888L947 703.5V598L983.5 598V759.5H944.5L886 655V759H849Z"
                    fill="white"
                    strokeWidth="2"
                    stroke="#FFFFFF"
                    variants={{
                      driving: shake,
                      stopping: {
                        opacity: 0,
                      }
                    }}
                    initial="driving"
                    animate="driving"
                    transition={{
                      yoyo: Infinity,
                      duration: 0.2,
                    }}
                />

                {/* A -- 0.85 */}

                <rect x="34" y="718" width="189" height="212" fill="#0A0F16" />
                <motion.path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M111 739.5L53 901.5H93L98.9998 882H157L163 901.5H204L145 739.5L111 739.5ZM147.5 852.5L128 787L108.5 852.5H147.5Z"
                    fill="white"
                    animate={shake}
                    transition={{
                      yoyo: Infinity,
                      duration: 0.2,
                    }}
                />
                
            </svg>
        </div>
    );
}
